# 컨테이너와 쿠버네티스 쉽게 이해하기 (작성중)

## 컨테이너란?

> 컨테이너는 애플리케이션과 애플리케이션을 구동하는 환경을 격리한 공간으로, 이미 리눅스에 오래전부터 내장된 기술.

## 컨테이너의 장점은?

##### 컨테이너는 효율성이 높다

 보통 1개의 가상머신에 1개의 서비스 구동이 권장. 하지만, 해당 애플리케이션이 가상머신의 모든 자원 사용하지 않기에 유휴 자원이 생겨서 성능적 오버헤드 발생. 컨테이너의 경우 운영체제의 자원을 공유하기 때문에 애플리케이션을 실행하는데 필요한 만큼의 자원만 할당받을 수 있다.

##### 컨테이너는 신속성이 높다.

##### 라이센스 비용이 절감된다.

## 단점은?

컨테이너들은 OS 커널을 공유하기 때문에, 하나의 컨테이너가 무리하게 자원을 사용하게 될 수 있다. 자원 할당량을 사전에 지정시켜 줄 수  있지만, 만약 이런 상황이 발생하면 컨테이너에 장애 발생. 이런 컨테이너의 문제를 **쿠버네티스**로 해결할 수 있다.

## 컨테이너의 응용

### 1. 개발 환경 이전 솔루션

개발자들 애플리케이션 개발 시 주로 개인환경에서 개발한 뒤 통합 환경에서 여러 개발자 코드를 통합. 그 후 테스트 환경에서 애플리케이션 테스트 한 뒤, 실제 운영 환경으로 애플리케이션 이전. 이렇게 수차례 환경을 이전하다 보면 소프트웨어의 버전이나 서버 설정의 차이로 인해 다양한 장애가 매우 빈번하게 발생. **그러나** 컨테이너를 사용하면 환경 이전이 쉽다! 컨테이너에 애플리케이션과 구동 환경을 그대로 담고 그 환경 자체를 다른 서버로 이전하면, 장애 걱정 없이 신속하고 안정적으로 환경 이전 가능. 컨테이너는 이미지 파일로 배포 및 형상관리가 가능하다!

### 2. 마이크로 서비스화 솔루션

마이크로 서비스를 구성할 때 컨테이너를 사용하면 하나의 애플리케이션을 기능 혹은 서비스 단위로 신속하게 배포 가능. 컨테이너는 기본적으로 독립적인 구조라 하나의 변경 사항이 분리된 다른 기능들에게 영향을 미치지 않는다!

## 쿠버네티스란?

컨테이너가 엄청나게 많아질 때 관리와 운영을 도와주는 도구. 컨테이너 오케스트레이션 플랫폼 중 하나로, 구글이 자사 서비스를 위해 개발했던 Borg에서 얻은 운영 노하우를 오픈소스로 공개한 것

### 컨테이너 오케스트레이션이란?

쉽게 말하자면 여러 컨테이너를 편리하게 관리해주는 작업. 실제로는 스케줄링, 클러스터링, 서비스 디스커버리, 로깅 및 모니터링을 수행. 

> 작은 수의 컨테이너라면 수동으로 VM이나 하드웨어에 직접 배포하면 되지만, VM이나 하드웨어의 수가 많아지고 컨테이너의 수가 많아지면, 이 컨테이너를 어디에 배포해야 하는지에 대한 결정이 필요하다. 컨테이너 사이즈가 2 CPU, 8 CPU 등 다양할 수 있기 때문에, 자원을 최대한 최적으로 사용하기 위해서 적절한 위치에 배포해야 하고, 애플리케이션 특성들에 따라서, 같은 물리 서버에 배포가 되어야 하거나 또는 가용성을 위해서 일부러 다른 물리서버에 배포되어야 하는 일이 있다. 이렇게 컨테이너를 적절한 서버에 배포해주는 역할을 **스케줄링**이라고 한다.



## 쿠버네티스 개념 및 용어 이해

### 마스터와 노드

쿠버네티스를 이해하기 위해선 먼저 클러스터의 구조를 이해하자. 클러스터 전체를 관리하는 컨트롤러로써 마스터가 존재, 컨테이너가 배포되는 머신 (가상머신이나 물리적인 서버머신) 인 노드가 존재한다.

![img](https://t1.daumcdn.net/cfile/tistory/99172C485B02D9C82A)

### 오브젝트

쿠버네티스를 이해하기 위해 가장 중요한 부분이 오브젝트이다. 가장 기본적인 구성단위가 되는 기본 오브젝트(Basic Object)와, 이 기본 오브젝트를 생성하고 관리하는 추가적인 기능을 가진 컨트롤러(Controller)로 이루어진다. 이러한 오브젝트의 스펙 이외에 추가정보인 메타 정보들로 구성이 된다.

#### 오브젝트 스펙

오브젝트들은 모두 오브젝트의 특성을 기술한 오브젝트 스펙으로 정의가 되고, 커맨드 라인을 통해서 오브젝트 생성시 인자로 전달하여 정의를 하거나 또는 yaml이나 json파일로 스펙을 정의할 수 있다.

#### 기본 오브젝트

쿠버네티스에 의해서 배포 및 관리되는 가장 기본적인 오브젝트는 컨테이너화되어 배포되는 애플리케이션의 워크로드를 기술하는 오브젝트로 Pod, Service, Volume, Namespace 4가지가 있다. 

간단하게 설명하자면 **Pod**는 컨테이너화된 애플리케이션, **Volume**은 디스크, **Service**는 로드밸런서 그리고 **Namespace**는 패키지명 정도로 생각하면 된다. 각각을 자세히 살펴보자



---

참고

 [컨테이너와 쿠버네티스 쉽게 이해하기](https://medium.com/@dodghekgoo/컨테이너와-쿠버네티스를-쉽게-이해하기-3bd07ff0a02d)

[쿠버네티스 #1 - 소개](https://bcho.tistory.com/1255)